#  Template NodeJS build

#  This template allows you to validate your NodeJS code.
#  The workflow allows running tests and code linting on the default branch.


#image: node:14.16.1-alpine
image: node:14.16.1
pipelines:
  default:
       - step:
           name: Build and Test
           
           #services: [docker]
           script:
              #- apk add --no-cache py-pip python-dev libffi-dev openssl-dev gcc libc-dev make
              #- apk add --update --no-cache curl py-pip
              #- set -eu
              #- apk add --no-cache py-pip bash
              #- pip install --no-cache-dir docker-compose
              - curl -L "https://github.com/docker/compose/releases/download/1.25.4/docker-compose-$(uname -s)-$(uname -m)" -o /usr/local/bin/docker-compose 
              - chmod +x /usr/local/bin/docker-compose
              - docker-compose -v
              #- pip install --no-cache-dir docker-compose
              - yarn
              - yarn build
              - yarn fix
              - yarn test
           services:
             - docker
#definitions:
 # services:
  #  docker:
   #   memory: 3072